#!/usr/bin/env node
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("fs"),require("path"),require("inquirer")):"function"==typeof define&&define.amd?define(["fs","path","inquirer"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).fs,e.path,e.inquirer)}(this,(function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=r(e),i=r(t),o=r(n);async function c(...e){try{return await o.default.prompt(...e)}catch(t){throw new Error(`\n            inquireWithHandle: ${e};\n\n            error: ${t}\n        `)}}function s(e,t){a.default.readdirSync(t).forEach((n=>{var r=t+"/"+n,i=e+"/"+n;a.default.stat(r,(function(e,t){if(e)throw e;if(t.isFile()){let e=a.default.createReadStream(r),t=a.default.createWriteStream(i);e.pipe(t)}else t.isDirectory()&&function(e,t,n){a.default.access(e,a.default.constants.F_OK,(r=>{r?(a.default.mkdirSync(e),n(e,t)):n(e,t)}))}(i,r,s)}))}))}const u=require("commander"),f=require("../package.json"),d={create:async function(...e){let t="handsome-mmc";t=0===function(...e){return e[2]&&Array.isArray(e[2].args)?e[2].args:[]}(...e).length?await async function(){const{projectName:e}=await c([{type:"input",message:"请输入要创建的项目名",name:"projectName",default:"handsome-mmc"}]);return e}():e[0];const n=await async function(){const e=function(){const e=i.default.resolve(__dirname,"../template");console.log(e);try{const t=a.default.readdirSync(e);return t.includes(".DS_Store")&&t.splice(t.indexOf(".DS_Store"),1),t}catch(e){console.log(e)}return[]}(),{templateType:t}=await c([{type:"list",choices:e,name:"templateType"}]);return t}();a.default.mkdirSync(`${t}`),s(`${process.cwd()}/${t}`,i.default.resolve(__dirname,`../template/${n}`))}};u.version(`${f.version}`,"-V, --version","output the current version"),u.description("@lm 的 脚手架工具"),u.usage("<command> [options]"),u.command("create [something]").description("console.log something").action(((...e)=>function(e,...t){d[e](...t)}("create",...e))),u.parse(process.argv)}));
